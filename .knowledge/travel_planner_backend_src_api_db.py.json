{"is_source_file": true, "format": "Python", "description": "This Python module configures database connectivity, session management, and ORM setup for the Travel Planner backend. It reads environment variables for database URL, sets up SQLAlchemy engine and session, and provides utility functions to initialize the database and generate database sessions for FastAPI.", "external_files": ["os", "src.api.models"], "external_methods": ["os.getenv", "ModelsBase.metadata.create_all"], "published": ["get_db", "init_db"], "classes": [], "methods": [{"name": "Generator[Session,None,None] get_db()", "description": "Provides a generator-based dependency for acquiring a SQLAlchemy session, ensuring proper cleanup after use.", "scope": "", "scopeKind": ""}, {"name": "None init_db()", "description": "Initializes the database by creating all tables based on the ORM models if they do not already exist.", "scope": "", "scopeKind": ""}], "calls": ["SessionLocal()", "db.close()", "ModelsBase.metadata.create_all(bind=engine)"], "search-terms": ["sqlalchemy session setup", "database initialization", "TRAVEL_PLANNER_DB_URL", "get_db generator", "create_engine", "sessionmaker"], "state": 2, "file_id": 5, "knowledge_revision": 13, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^DATABASE_URL = os.getenv(\"TRAVEL_PLANNER_DB_URL\", DEFAULT_SQLITE_URL)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_SQLITE_URL", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^DEFAULT_SQLITE_URL = \"sqlite:\\/\\/\\/.\\/travel_planner.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ModelsBase", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^    from src.api.models import Base as ModelsBase  # Ensure models are imported and registered$/", "file": true, "language": "Python", "kind": "unknown", "scope": "init_db", "scopeKind": "function", "nameref": "unknown:Base"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine, class_=Session, futu/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connect_args", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^connect_args = {\"check_same_thread\": False} if DATABASE_URL.startswith(\"sqlite\") else {}$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^engine = create_engine(DATABASE_URL, echo=False, future=True, connect_args=connect_args)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^def get_db() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/db.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "64214b6a47254db76b5fc071a393e127", "format-version": 4, "code-base-name": "travel_planner_backend", "filename": "travel_planner_backend/src/api/db.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(\"TRAVEL_PLANNER_DB_URL\", DEFAULT_SQLITE_URL)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_SQLITE_URL = \"sqlite:\\/\\/\\/.\\/travel_planner.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine, class_=Session, futu/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "connect_args = {\"check_same_thread\": False} if DATABASE_URL.startswith(\"sqlite\") else {}", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, echo=False, future=True, connect_args=connect_args)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13": ""}]}