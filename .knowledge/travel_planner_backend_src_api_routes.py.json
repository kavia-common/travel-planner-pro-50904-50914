{"is_source_file": true, "format": "Python", "description": "This file defines API route handlers for a travel planning backend, implemented with FastAPI. It includes endpoints for managing trips, destinations, itinerary items, accommodations, transport, and notes, with CRUD operations and search functionality. The routes interact with service layer functions and utilize Pydantic schemas for data validation and serialization.", "external_files": ["src.api.db", "src.api.schemas", "src.api.services"], "external_methods": ["services.list_trips", "services.create_trip", "services.get_trip", "services.update_trip", "services.delete_trip", "services.list_destinations", "services.create_destination", "services.get_destination", "services.update_destination", "services.delete_destination", "services.list_itinerary_items", "services.create_itinerary_item", "services.get_itinerary_item", "services.update_itinerary_item", "services.delete_itinerary_item", "services.list_accommodations", "services.create_accommodation", "services.get_accommodation", "services.update_accommodation", "services.delete_accommodation", "services.list_transport", "services.create_transport", "services.get_transport", "services.update_transport", "services.delete_transport", "services.list_notes", "services.create_note", "services.get_note", "services.update_note", "services.delete_note", "services.get_destination", "services.get_trip", "search-terms"], "published": ["list_trips", "create_trip", "get_trip", "update_trip", "delete_trip", "list_destinations", "create_destination", "get_destination", "update_destination", "delete_destination", "list_itinerary", "create_itinerary", "get_itinerary", "update_itinerary", "delete_itinerary", "list_accommodations", "create_accommodation", "get_accommodation", "update_accommodation", "delete_accommodation", "list_transport", "create_transport", "get_transport", "update_transport", "delete_transport", "list_notes", "create_note", "get_note", "update_note", "delete_note", "search_destinations"], "classes": [], "methods": [{"name": "create_accommodation(payload: AccommodationCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_destination(payload: DestinationCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_itinerary(payload: ItineraryItemCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_note(payload: NoteCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_transport(payload: TransportCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_trip(payload: TripCreate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_accommodation(acc_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_destination(destination_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_itinerary(item_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_note(note_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_transport(transport_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_trip(trip_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_accommodation(acc_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_destination(destination_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_itinerary(item_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_note(note_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_transport(transport_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_trip(trip_id: int, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_accommodations( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_destinations( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_itinerary( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), destination_id: Optional[int] = Query(None, description=\"Filter by destination id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_notes( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_transport( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_trips( db: Session = Depends(get_db), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "search_destinations(q: str = Query(..., min_length=1, description=\"Search query\"), country: Optional[str] = Query(None, description=\"Country filter\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_accommodation(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_destination(destination_id: int, payload: DestinationUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_itinerary(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_transport(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_trip(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["services.list_trips", "services.create_trip", "services.get_trip", "services.update_trip", "services.delete_trip", "services.list_destinations", "services.create_destination", "services.get_destination", "services.update_destination", "services.delete_destination", "services.list_itinerary_items", "services.create_itinerary_item", "services.get_itinerary_item", "services.update_itinerary_item", "services.delete_itinerary_item", "services.list_accommodations", "services.create_accommodation", "services.get_accommodation", "services.update_accommodation", "services.delete_accommodation", "services.list_transport", "services.create_transport", "services.get_transport", "services.update_transport", "services.delete_transport", "services.list_notes", "services.create_note", "services.get_note", "services.update_note", "services.delete_note"], "search-terms": ["api", "routes", "travel", "trip", "destination", "itinerary", "accommodation", "transport", "notes", "FastAPI", "service", "schema", "CRUD"], "state": 2, "file_id": 8, "knowledge_revision": 29, "git_revision": "5dde61df4701b69acbe66eb263021390cba5e4c0", "revision_history": [{"21": ""}, {"22": "5a02cf918ffddb0d3fc3d4a22bcfcc8e80d7b8b4"}, {"24": "5a02cf918ffddb0d3fc3d4a22bcfcc8e80d7b8b4"}, {"29": "5dde61df4701b69acbe66eb263021390cba5e4c0"}], "ctags": [{"_type": "tag", "name": "MOCK_DESTINATIONS", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^MOCK_DESTINATIONS = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_accommodation(payload: AccommodationCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: AccommodationCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_destination(payload: DestinationCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: DestinationCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_itinerary(payload: ItineraryItemCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: ItineraryItemCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_note(payload: NoteCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: NoteCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_transport(payload: TransportCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: TransportCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_trip(payload: TripCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: TripCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_accommodation(acc_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(acc_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_destination(destination_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(destination_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_itinerary(item_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_transport(transport_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(transport_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_trip(trip_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_accommodation(acc_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(acc_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_destination(destination_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(destination_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_itinerary(item_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_transport(transport_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(transport_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_trip(trip_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_accommodations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_accommodations($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_destinations($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_itinerary($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), destination_id: Optional[int] = Query(None, description=\"Filter by destination id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_notes($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_transport($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_trips", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_trips($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search_destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def search_destinations(q: str = Query(..., min_length=1, description=\"Search query\"), country: /", "language": "Python", "kind": "function", "signature": "(q: str = Query(..., min_length=1, description=\"Search query\"), country: Optional[str] = Query(None, description=\"Country filter\"))"}, {"_type": "tag", "name": "update_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_accommodation(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db/", "language": "Python", "kind": "function", "signature": "(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_destination(destination_id: int, payload: DestinationUpdate, db: Session = Depends(ge/", "language": "Python", "kind": "function", "signature": "(destination_id: int, payload: DestinationUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_itinerary(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_transport(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))/", "language": "Python", "kind": "function", "signature": "(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_trip(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db))"}], "hash": "d20a1a7e876e39cfa066e1e486c926be", "format-version": 4, "code-base-name": "travel_planner_backend", "filename": "travel_planner_backend/src/api/routes.py", "fields": [{"name": "MOCK_DESTINATIONS = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}