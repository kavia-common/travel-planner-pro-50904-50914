{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines API route handlers for a travel planning backend application using FastAPI. It includes CRUD endpoints for trips, destinations, itinerary items, accommodations, transport, and notes, along with a mock destination search. The code manages database sessions, input validation, and response models, providing RESTful APIs for managing trip-related data.", "external_files": ["src.api.db", "src.api.models", "src.api.schemas"], "external_methods": ["get_db", "Trip.model_validate", "PageMeta"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI's router object for registering route handlers."}], "methods": [{"name": "apply_pagination(query, offset: int, limit: int)", "description": "Utility function to apply offset and limit to a query, returning paginated items and total count.", "scope": "", "scopeKind": ""}, {"name": "list_trips( db: Session = Depends(get_db), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "Endpoint to list all trips with pagination.", "scope": "", "scopeKind": ""}, {"name": "create_trip(payload: TripCreate, db: Session = Depends(get_db))", "description": "Endpoint to create a new trip.", "scope": "", "scopeKind": ""}, {"name": "get_trip(trip_id: int, db: Session = Depends(get_db))", "description": "Retrieve a specific trip by ID.", "scope": "", "scopeKind": ""}, {"name": "update_trip(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db))", "description": "Update details of an existing trip.", "scope": "", "scopeKind": ""}, {"name": "delete_trip(trip_id: int, db: Session = Depends(get_db))", "description": "Delete a trip by ID.", "scope": "", "scopeKind": ""}, {"name": "list_destinations( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "List destinations with optional filtering by trip ID.", "scope": "", "scopeKind": ""}, {"name": "create_destination(payload: DestinationCreate, db: Session = Depends(get_db))", "description": "Create a new destination linked to a trip.", "scope": "", "scopeKind": ""}, {"name": "get_destination(destination_id: int, db: Session = Depends(get_db))", "description": "Retrieve a destination by ID.", "scope": "", "scopeKind": ""}, {"name": "update_destination(destination_id: int, payload: DestinationUpdate, db: Session = Depends(get_db))", "description": "Update an existing destination.", "scope": "", "scopeKind": ""}, {"name": "delete_destination(destination_id: int, db: Session = Depends(get_db))", "description": "Remove a destination by ID.", "scope": "", "scopeKind": ""}, {"name": "list_itinerary( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), destination_id: Optional[int] = Query(None, description=\"Filter by destination id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "List itinerary items with optional filtering.", "scope": "", "scopeKind": ""}, {"name": "create_itinerary(payload: ItineraryItemCreate, db: Session = Depends(get_db))", "description": "Create a new itinerary item.", "scope": "", "scopeKind": ""}, {"name": "get_itinerary(item_id: int, db: Session = Depends(get_db))", "description": "Retrieve an itinerary item by ID.", "scope": "", "scopeKind": ""}, {"name": "update_itinerary(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db))", "description": "Update an existing itinerary item.", "scope": "", "scopeKind": ""}, {"name": "delete_itinerary(item_id: int, db: Session = Depends(get_db))", "description": "Delete an itinerary item by ID.", "scope": "", "scopeKind": ""}, {"name": "list_accommodations( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "List accommodations with optional filtering.", "scope": "", "scopeKind": ""}, {"name": "create_accommodation(payload: AccommodationCreate, db: Session = Depends(get_db))", "description": "Create a new accommodation.", "scope": "", "scopeKind": ""}, {"name": "get_accommodation(acc_id: int, db: Session = Depends(get_db))", "description": "Retrieve an accommodation by ID.", "scope": "", "scopeKind": ""}, {"name": "update_accommodation(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db))", "description": "Update an existing accommodation.", "scope": "", "scopeKind": ""}, {"name": "delete_accommodation(acc_id: int, db: Session = Depends(get_db))", "description": "Delete an accommodation by ID.", "scope": "", "scopeKind": ""}, {"name": "list_transport( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "List transport entries with optional filtering.", "scope": "", "scopeKind": ""}, {"name": "create_transport(payload: TransportCreate, db: Session = Depends(get_db))", "description": "Create a new transport entry.", "scope": "", "scopeKind": ""}, {"name": "get_transport(transport_id: int, db: Session = Depends(get_db))", "description": "Retrieve a transport entry by ID.", "scope": "", "scopeKind": ""}, {"name": "update_transport(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))", "description": "Update a transport entry.", "scope": "", "scopeKind": ""}, {"name": "delete_transport(transport_id: int, db: Session = Depends(get_db))", "description": "Delete a transport entry by ID.", "scope": "", "scopeKind": ""}, {"name": "list_notes( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )", "description": "List notes with optional filtering.", "scope": "", "scopeKind": ""}, {"name": "create_note(payload: NoteCreate, db: Session = Depends(get_db))", "description": "Create a new note.", "scope": "", "scopeKind": ""}, {"name": "get_note(note_id: int, db: Session = Depends(get_db))", "description": "Retrieve a note by ID.", "scope": "", "scopeKind": ""}, {"name": "update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))", "description": "Update a note.", "scope": "", "scopeKind": ""}, {"name": "delete_note(note_id: int, db: Session = Depends(get_db))", "description": "Delete a note by ID.", "scope": "", "scopeKind": ""}, {"name": "search_destinations(q: str = Query(..., min_length=1, description=\"Search query\"), country: Optional[str] = Query(None, description=\"Country filter\"))", "description": "Search destinations using a mock dataset query.", "scope": "", "scopeKind": ""}], "calls": ["db.query", "db.get", "db.add", "db.commit", "db.refresh", "raise HTTPException", "TripOut.model_validate", "DestinationOut.model_validate", "ItineraryItemOut.model_validate", "AccommodationOut.model_validate", "TransportOut.model_validate", "NoteOut.model_validate"], "search-terms": ["FastAPI routes", "Trip CRUD", "Destination CRUD", "ItineraryItem CRUD", "Accommodations API", "Transport API", "Notes API", "mock destination search", "Paginated API routes"], "state": 2, "file_id": 8, "knowledge_revision": 21, "git_revision": "", "ctags": [{"_type": "tag", "name": "MOCK_DESTINATIONS", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^MOCK_DESTINATIONS = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "apply_pagination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def apply_pagination(query, offset: int, limit: int):$/", "language": "Python", "kind": "function", "signature": "(query, offset: int, limit: int)"}, {"_type": "tag", "name": "create_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_accommodation(payload: AccommodationCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: AccommodationCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_destination(payload: DestinationCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: DestinationCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_itinerary(payload: ItineraryItemCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: ItineraryItemCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_note(payload: NoteCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: NoteCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_transport(payload: TransportCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: TransportCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def create_trip(payload: TripCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: TripCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_accommodation(acc_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(acc_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_destination(destination_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(destination_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_itinerary(item_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_transport(transport_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(transport_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def delete_trip(trip_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_accommodation(acc_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(acc_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_destination(destination_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(destination_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_itinerary(item_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_transport(transport_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(transport_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def get_trip(trip_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_accommodations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_accommodations($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_destinations($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_itinerary($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), destination_id: Optional[int] = Query(None, description=\"Filter by destination id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_notes($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_transport($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), trip_id: Optional[int] = Query(None, description=\"Filter by trip id\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "list_trips", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def list_trips($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), limit: int = Query(25, ge=1, le=100, description=\"Limit for pagination\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search_destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def search_destinations(q: str = Query(..., min_length=1, description=\"Search query\"), country: /", "language": "Python", "kind": "function", "signature": "(q: str = Query(..., min_length=1, description=\"Search query\"), country: Optional[str] = Query(None, description=\"Country filter\"))"}, {"_type": "tag", "name": "update_accommodation", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_accommodation(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db/", "language": "Python", "kind": "function", "signature": "(acc_id: int, payload: AccommodationUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_destination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_destination(destination_id: int, payload: DestinationUpdate, db: Session = Depends(ge/", "language": "Python", "kind": "function", "signature": "(destination_id: int, payload: DestinationUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_itinerary(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(item_id: int, payload: ItineraryItemUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_transport", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_transport(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))/", "language": "Python", "kind": "function", "signature": "(transport_id: int, payload: TransportUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "update_trip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-50904-50914/travel_planner_backend/src/api/routes.py", "pattern": "/^def update_trip(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(trip_id: int, payload: TripUpdate, db: Session = Depends(get_db))"}], "hash": "60ee557b84c495aaefa636906bdaf890", "format-version": 4, "code-base-name": "travel_planner_backend", "filename": "travel_planner_backend/src/api/routes.py", "fields": [{"name": "MOCK_DESTINATIONS = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"21": ""}]}